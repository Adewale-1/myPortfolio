<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <defs>
    <pattern id="grid-pattern" width="50" height="50" patternUnits="userSpaceOnUse">
      <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#e9ecef" stroke-width="0.5"/>
    </pattern>
    
    <!-- Gradient for price chart -->
    <linearGradient id="priceGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:0.5" />
      <stop offset="100%" style="stop-color:#3498db;stop-opacity:0" />
    </linearGradient>
    
    <!-- Filter for glow effect -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feComposite in="SourceGraphic" in2="blur" operator="over"/>
    </filter>
  </defs>
  
  <rect width="800" height="500" fill="#f8f9fa" rx="10" ry="10"/>
  <rect width="800" height="500" fill="url(#grid-pattern)" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="28" text-anchor="middle" font-weight="bold" fill="#333">Market Imbalance Detection</text>
  
  <!-- Subtitle -->
  <text x="400" y="70" font-family="Arial" font-size="16" text-anchor="middle" fill="#666">Smart Money Concept Analysis</text>
  
  <!-- Chart Background -->
  <rect x="50" y="100" width="700" height="300" fill="#ffffff" stroke="#ced4da" stroke-width="1" rx="5" ry="5"/>
  
  <!-- Price Axis -->
  <line x1="50" y1="100" x2="50" y2="400" stroke="#ced4da" stroke-width="1"/>
  <text x="42" y="110" font-family="Arial" font-size="10" text-anchor="end" fill="#666">$100</text>
  <text x="42" y="175" font-family="Arial" font-size="10" text-anchor="end" fill="#666">$95</text>
  <text x="42" y="250" font-family="Arial" font-size="10" text-anchor="end" fill="#666">$90</text>
  <text x="42" y="325" font-family="Arial" font-size="10" text-anchor="end" fill="#666">$85</text>
  <text x="42" y="395" font-family="Arial" font-size="10" text-anchor="end" fill="#666">$80</text>
  
  <!-- Time Axis -->
  <line x1="50" y1="400" x2="750" y2="400" stroke="#ced4da" stroke-width="1"/>
  <text x="100" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 1</text>
  <text x="200" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 2</text>
  <text x="300" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 3</text>
  <text x="400" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 4</text>
  <text x="500" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 5</text>
  <text x="600" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 6</text>
  <text x="700" y="415" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">Day 7</text>
  
  <!-- Price Chart -->
  <path d="M 100,320 L 200,300 L 300,250 L 400,220 L 500,180 L 600,140 L 700,120" 
        stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Price Area Fill -->
  <path d="M 100,320 L 200,300 L 300,250 L 400,220 L 500,180 L 600,140 L 700,120 V 400 H 100 Z" 
        fill="url(#priceGradient)" opacity="0.3"/>
  
  <!-- Candlesticks -->
  <!-- Day 1 Candle -->
  <rect x="95" y="310" width="10" height="20" fill="#4caf50" stroke="#4caf50" stroke-width="1"/>
  <line x1="100" y1="305" x2="100" y2="310" stroke="#4caf50" stroke-width="1"/>
  <line x1="100" y1="330" x2="100" y2="340" stroke="#4caf50" stroke-width="1"/>
  
  <!-- Day 2 Candle -->
  <rect x="195" y="290" width="10" height="20" fill="#4caf50" stroke="#4caf50" stroke-width="1"/>
  <line x1="200" y1="285" x2="200" y2="290" stroke="#4caf50" stroke-width="1"/>
  <line x1="200" y1="310" x2="200" y2="320" stroke="#4caf50" stroke-width="1"/>
  
  <!-- Day 3 Candle -->
  <rect x="295" y="240" width="10" height="25" fill="#4caf50" stroke="#4caf50" stroke-width="1"/>
  <line x1="300" y1="230" x2="300" y2="240" stroke="#4caf50" stroke-width="1"/>
  <line x1="300" y1="265" x2="300" y2="275" stroke="#4caf50" stroke-width="1"/>
  
  <!-- Day 4 Candle -->
  <rect x="395" y="230" width="10" height="10" fill="#f44336" stroke="#f44336" stroke-width="1"/>
  <line x1="400" y1="220" x2="400" y2="230" stroke="#f44336" stroke-width="1"/>
  <line x1="400" y1="240" x2="400" y2="250" stroke="#f44336" stroke-width="1"/>
  
  <!-- Day 5 Candle -->
  <rect x="495" y="170" width="10" height="20" fill="#4caf50" stroke="#4caf50" stroke-width="1"/>
  <line x1="500" y1="160" x2="500" y2="170" stroke="#4caf50" stroke-width="1"/>
  <line x1="500" y1="190" x2="500" y2="200" stroke="#4caf50" stroke-width="1"/>
  
  <!-- Day 6 Candle -->
  <rect x="595" y="130" width="10" height="15" fill="#4caf50" stroke="#4caf50" stroke-width="1"/>
  <line x1="600" y1="125" x2="600" y2="130" stroke="#4caf50" stroke-width="1"/>
  <line x1="600" y1="145" x2="600" y2="155" stroke="#4caf50" stroke-width="1"/>
  
  <!-- Day 7 Candle -->
  <rect x="695" y="110" width="10" height="20" fill="#4caf50" stroke="#4caf50" stroke-width="1"/>
  <line x1="700" y1="105" x2="700" y2="110" stroke="#4caf50" stroke-width="1"/>
  <line x1="700" y1="130" x2="700" y2="140" stroke="#4caf50" stroke-width="1"/>
  
  <!-- Market Imbalances Visualized -->
  <!-- Fair Value Gap - Bottom Side -->
  <rect x="310" y="220" width="80" height="30" fill="#9c27b0" opacity="0.3" rx="2" ry="2"/>
  <text x="350" y="240" font-family="Arial" font-size="11" text-anchor="middle" fill="#9c27b0" font-weight="bold">Bottom Imbalance</text>
  
  <!-- Fair Value Gap - Top Side -->
  <rect x="510" y="125" width="80" height="30" fill="#ff9800" opacity="0.3" rx="2" ry="2"/>
  <text x="550" y="145" font-family="Arial" font-size="11" text-anchor="middle" fill="#ff9800" font-weight="bold">Top Imbalance</text>
  
  <!-- Annotations -->
  <line x1="300" y1="275" x2="350" y2="260" stroke="#666" stroke-width="1" stroke-dasharray="4 4"/>
  <circle cx="300" cy="275" r="4" fill="#333"/>
  <text x="360" y="260" font-family="Arial" font-size="11" text-anchor="start" fill="#333">Price jumps creating imbalance</text>
  
  <line x1="500" y1="160" x2="450" y2="170" stroke="#666" stroke-width="1" stroke-dasharray="4 4"/>
  <circle cx="500" cy="160" r="4" fill="#333"/>
  <text x="370" y="170" font-family="Arial" font-size="11" text-anchor="start" fill="#333">Trending continues after imbalance</text>
  
  <!-- SMC Detection Logic -->
  <rect x="50" y="430" width="700" height="60" rx="5" ry="5" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" />
  
  <text x="90" y="450" font-family="Consolas, monospace" font-size="11" text-anchor="start" fill="#333">
    df["top_imbalance_size"] = df["low"].shift(2) - df["high"]
  </text>
  <text x="90" y="465" font-family="Consolas, monospace" font-size="11" text-anchor="start" fill="#333">
    df["bottom_imbalance_size"] = df["low"] - df["high"].shift(2)
  </text>
  <text x="90" y="480" font-family="Consolas, monospace" font-size="11" text-anchor="start" fill="#333">
    df["top_imbalance_flag"] = (df["top_imbalance_size"] > 0) & (df["top_imbalance_percentage"] > 1)
  </text>
  
  <!-- Analytics Summary -->
  <text x="400" y="350" font-family="Arial" font-size="14" text-anchor="middle" fill="#333" font-weight="bold">
    Smart Money Analysis: Identifying Institutional Footprints
  </text>
  
  <text x="400" y="370" font-family="Arial" font-size="12" text-anchor="middle" fill="#666">
    Market imbalances (gaps) often indicate institutional activity and potential reversal zones
  </text>
</svg> 